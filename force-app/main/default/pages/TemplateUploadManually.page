<apex:page
  standardController="Order"
  extensions="TemplateUploadManuallyController"
>
  <apex:slds />

  <style>
    .centered-panel {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
    }
  </style>

  <apex:form>
    <apex:actionStatus id="pageStatus">
      <apex:facet name="start">
        <apex:outputPanel styleClass="centered-panel">
          <img src="/img/loading32.gif" width="25" height="25" />
          <apex:outputLabel value="Loading..." />
        </apex:outputPanel>
      </apex:facet>
    </apex:actionStatus>

    <apex:actionFunction
      name="uploadFunction"
      action="{!uploadPdfTemplate}"
      rerender="none"
      status="pageStatus"
      oncomplete="hideSpinner()"
    />

    <script>
      window.onload = function () {
        uploadFunction();
      };

      function hideSpinner() {
        showToast("Success", "File Uploaded Successfully", "success");
        window.location.href = "/{!order.Id}";
      }

      function showToast(title, message, type) {
        sforce.one.showToast({
          title: title,
          message: message,
          type: type,
          duration: 3000
        });
      }
    </script>
  </apex:form>
</apex:page>
